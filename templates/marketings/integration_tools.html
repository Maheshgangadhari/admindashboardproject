<!DOCTYPE html>

{% extends 'base.html'%}
{% load static %}

  {% block title %}
      Affiliate Script - ADMIN PANEL
  {% endblock %}

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  	{%block body_block%}

<div class="main">
    <div class="overly"></div>
{#    nav#}
    {% include 'navgation.html' %}
        <div class="dashboard-wrap">
            <div class="dashboard-main-right">
               {% include 'rightheader.html' %}

                    <div class="server-errors">
                    </div>
                    <script>
                        function sessionTimeout() {
                            var dt = new Date();
                            let distance = (GlobaleCountDownDate - dt.getTime()) / 1000;

                            let h = Math.floor(distance / 3600);
                            let m = Math.floor(distance % 3600 / 60);
                            let s = Math.floor(distance % 3600 % 60);

                            let string = "";

                            string += (h > 0) ? ('0' + h).slice(-2) + ":" : "00:";

                            string += (m > 0) ? ('0' + m).slice(-2) + ":" : "00:";

                            string += (s > 0) ? ('0' + s).slice(-2) + "" : "00";

                            $(".dashboard-refresh em").text(string);

                            if (distance <= 0) {
                                window.location.replace('logout');
                                clearInterval(GlobaleCountDownDateInterval);
                            }
                        }

                        var dt = new Date();
                        var GlobaleCountDownDate = dt.setTime(dt.getTime() + (1800 * 1000));

                        sessionTimeout();
                        var GlobaleCountDownDateInterval = setInterval(sessionTimeout, 100);

                        $(document).ajaxComplete(function(event, request, settings) {
                            let parts = settings.url.split("/");
                            let last_part = parts[parts.length - 1];
                            if (last_part != "ajax_dashboard") {
                                var dt = new Date();
                                var GlobaleCountDownDate = dt.setTime(dt.getTime() + (1800 * 1000));
                            }
                        });
                    </script>
                    <div class="content-wrapper">
                        <style type="text/css">
                            #myTable tr td {
                                vertical-align: middle;
                            }

                            #progressbar123 {
                                background-color: lightgrey;
                                padding: 3px;
                            }

                            #progressbar123>div {
                                background-color: #55407F;
                                width: 0%;
                                height: 15px;
                            }
                        </style>

                        <div class="row">
                            <div class="col-sm-3">
                                <div class="card m-b-30 text-white bg-primary">
                                    <div class="card-body">
                                        <blockquote class="card-bodyquote mb-0">
                                            <h3>Banner Campaign</h3>
                                            <a href="https://demo.affiliatepro.org/integration/integration_tools_form/banner" class="btn btn-dark waves-effect waves-light"><i class="fa fa-plus"></i> Create New</a>
                                        </blockquote>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="card m-b-30 text-white bg-secondary">
                                    <div class="card-body">
                                        <blockquote class="card-bodyquote mb-0">
                                            <h3>Text Campaign</h3>
                                            <a href="https://demo.affiliatepro.org/integration/integration_tools_form/text_ads" class="btn btn-dark waves-effect waves-light"><i class="fa fa-plus"></i> Create New</a>
                                        </blockquote>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="card m-b-30 text-white bg-info">
                                    <div class="card-body">
                                        <blockquote class="card-bodyquote mb-0">
                                            <h3>Link Campaign</h3>
                                            <a href="https://demo.affiliatepro.org/integration/integration_tools_form/link_ads" class="btn btn-dark waves-effect waves-light"><i class="fa fa-plus"></i>Create New</a>
                                        </blockquote>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="card m-b-30 text-white bg-warning">
                                    <div class="card-body">
                                        <blockquote class="card-bodyquote mb-0">
                                            <h3>Video Campaign</h3>
                                            <a href="https://demo.affiliatepro.org/integration/integration_tools_form/video_ads" class="btn btn-dark waves-effect waves-light"><i class="fa fa-plus"></i> Create New</a>
                                        </blockquote>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <div class="card m-b-20">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-12">
                                                <div>
                                                    <div class="row mb-3">
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <select class="form-control category_id">
											<option value="">All Categories</option>
																							<option value="1">Clicks</option>
																							<option value="2">Salse</option>
																							<option value="3">Actions</option>
																							<option value="4">Leads</option>
																							<option value="5">Registration</option>
																							<option value="11">TesT2</option>
																							<option value="13">237606380660229</option>
																							<option value="14">WYKR Category</option>
																							<option value="15">dsd</option>
																							<option value="16">Programacion</option>
																							<option value="17">Test</option>
																							<option value="18">Fruit</option>
																							<option value="19">Amall</option>
																							<option value="20">tall</option>
																							<option value="21">logistics </option>
																							<option value="22">FX</option>
																							<option value="25">MD</option>
																							<option value="26">Puzzle Book</option>
																							<option value="27">xxxxxx</option>
																							<option value="29">E-books Delivery</option>
																							<option value="30">E test</option>
																							<option value="31">Hosting</option>
																							<option value="32">Bus</option>
																							<option value="33">Earnshow</option>
																							<option value="34">matrix</option>
																							<option value="35">FSL</option>
																							<option value="37">Marketing</option>
																							<option value="38">Pintores</option>
																							<option value="40">img</option>
																							<option value="41">Link</option>
																							<option value="58">Husni</option>
																							<option value="59">loan</option>
																							<option value="60">test</option>
																							<option value="61">Abbas</option>
																							<option value="63">Jualan</option>
																							<option value="66">Lawwa Services</option>
																							<option value="68">SCKREAM Test</option>
																							<option value="69">ahmed</option>
																							<option value="71">[removed][removed]</option>
																							<option value="72">[removed][removed]</option>
																							<option value="73">shoes</option>
																							<option value="74">shoes</option>
																							<option value="75">Graphic design</option>
																							<option value="76">try2try</option>
																							<option value="77">sales 20%</option>
																							<option value="78">Facebook</option>
																							<option value="79">Yoga</option>
																							<option value="80">Toyota car </option>
																							<option value="81">shoes</option>
																					</select>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <input class="table-search form-control ads_name" placeholder="Enter Campaign name..." type="search">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <select name="vendor_id" class="form-control vendor_id">
																						<option value="">All Campaigns</option>
											<option value="only_admins">All Admin Campaigns</option>
											<option value="only_vendors">All Vendor Campaigns</option>
																							<option  value="2">user1 user1</option>
																							<option  value="92">asd asd</option>
																							<option  value="144">customer testing</option>
																							<option  value="604">Khawar Iqbal</option>
																							<option  value="649">ddd ddd</option>
																							<option  value="689">Test myname</option>
																							<option  value="691">Mi tienda Prueba</option>
																					</select>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <select name="groups[]" class="form-control select2 groups" multiple="multiple">
																							<option value="8">Deneme</option>
																							<option value="9">ttt</option>
																							<option value="10">Ddd</option>
																							<option value="11">Tbzgrp</option>
																							<option value="12">Real Estate</option>
																							<option value="13">Alkebu Society Club</option>
																							<option value="14">hello kitty</option>
																							<option value="15">101 Real Estate</option>
																					</select>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <label class="form-control checkbox">
											<input type="checkbox" class="show_only" name="show_only" value="admin">
											<span>Show Only Admin Campaigns</span>
										</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <select class="form-control" name="status">
											<option value="">All Status</option>
											<option value="1">Public</option>
											<option value="2">In Review</option>
											<option value="0">Draft</option>
										</select>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <button class="btn btn-info waves-effect waves-light btn-integration-tools" data-toggle="modal" data-target="#cron-job-info-modal">Cron job setting</button>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <button class="btn btn-dark waves-effect waves-light btn-integration-tools" data-toggle="modal" data-target="#perform-security-check-modal">Perform Integration Check</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="text-center col-12 empty-div d-none">
                                                <img class="img-responsive" src="{% static 'dashboard/assets/vertical/assets/images/no-data-2.png' %}" style="margin-top:25px;">
                                                <h3 class="m-t-40 text-center">Campaigns Not Available</h3>
                                            </div>
                                            <div class="table-responsive b-0" data-pattern="priority-columns">

                                                <table id="myTable" class="table table-striped table-white-space-normal">
                                                    <thead>
                                                        <tr>
                                                            <th>Image</th>
                                                            <th>User</th>
                                                            <th>Campaign Name</th>
                                                            <th>Integration Plugin Name</th>
                                                            <th class="text-center">Created At</th>
                                                            <th class="text-center">Integration status</th>
                                                            <th class="text-center">Status</th>
                                                            <th class="text-center">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                    <tfoot>
                                                        <tr>
                                                            <td colspan="12" class="text-right">
                                                                <ul class="pagination pagination-td"></ul>
                                                            </td>
                                                        </tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="integration-mlm-info"></div>

                        <div class="modal fade" id="integration-code">
                            <div class="modal-dialog">
                                <div class="modal-content"></div>
                            </div>
                        </div>

                        <div class="modal fade" id="showcode-code"></div>

                        <div id="cron-job-info-modal" class="modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Cron job setting</h5>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <h5>WHAT IS A CRON JOB?</h5>
                                                <p>A cron job is simply a task that you schedule to run automatically at specific intervals. For example, if you want to back up a file every six hours, you can set this up easily using cPanel's cron jobs feature.</p>

                                                <h6>To add a cron job, follow these steps:</h6>

                                                <ol>
                                                    <li>Log in to cPanel</li>
                                                    <li>In the <b>ADVANCED</b> section of the cPanel home screen, click <b>Cron Jobs</b>.</li>
                                                    <li>Under <b>Add New Cron Job</b>, specify the interval for the command you want.</li>
                                                    <li>In the <b>Common Settings</b>, select <b>Once Per Minute(* * * * *)</b>.</li>
                                                    <li>In the <b>Command</b> box add
                                                        <div> <code>curl https://demo.affiliatepro.org/cronJob/check_campaign_security</code></div>
                                                    </li>
                                                    <li>Click Add New Cron Job. cPanel creates the cron job.</li>
                                                </ol>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="perform-security-check-modal" class="modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Perform Integration Check</h5>
                                    </div>
                                    <div class="modal-body">
                                        <div class="step-1">
                                            <h5>Are you sure you want to perform a integration check for all campaigns?</h5>
                                            <h6>This may take longer depending on the number of campaigns available.</h6>
                                        </div>
                                        <div class="step-2" style="display:none;">
                                            <h5>Please wait while performing a integration check...</h5>
                                            <div id="progressbar123">
                                                <div></div>
                                            </div>
                                            <h6 class="text-success approved" data-count="0" style="display:none;">0 campaigns verified successfully</h6>
                                            <h6 class="text-info pending" data-count="0" style="display:none;">0 campaigns in pending integration</h6>
                                            <h6 class="text-warning warning" style="display:none;font-size: 21px;">No campaigns are available</h6>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary allow_to_perform_security_check">Yes, Continue</button>
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <link rel="stylesheet" type="text/css" href="https://demo.affiliatepro.org/assets/plugins/social-share/social-share.css' %}">
                        <div id="social-share-modal" class="modal" tabindex="-1" role="dialog">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Share on Social Network</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                                    </div>
                                    <div class="modal-body">

                                    </div>
                                </div>
                            </div>
                        </div>

                        <script type="text/javascript">
                            $(document).on("click", "[data-social-share]", function() {

                                let url = encodeURIComponent($(this).data("share-url"));
                                let title = $(this).data("share-title") ? encodeURIComponent($(this).data("share-title")) : url;
                                let desc = $(this).data("share-desc") ? encodeURIComponent($(this).data("share-desc")) : "";

                                $('#social-share-modal .modal-body').html(`
                        <!-- Sharingbutton Facebook -->
                        <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=` + url + `&description=" target="_blank" rel="noopener" aria-label="Facebook">
                        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solidcircle"><i class="fab fa-facebook-square"></i>&nbsp;</div>Facebook</div></a>

                        <!-- Sharingbutton Twitter -->
                        <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=` + title + `%20` + desc + `&amp;url=` + url + `" target="_blank" rel="noopener" aria-label="Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solidcircle"><i class="fab fa-twitter" aria-hidden="true"></i>&nbsp;</div>Twitter</div></a>

                        <!-- Sharingbutton Tumblr -->
                        <a class="resp-sharing-button__link" href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=` + title + `&amp;caption=` + title + `&amp;content=` + desc + `&amp;canonicalUrl=` + url + `&amp;shareSource=tumblr_share_button" target="_blank" rel="noopener" aria-label="Tumblr"><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solidcircle"><i class="fab fa-tumblr-square" aria-hidden="true"></i>&nbsp;</div>Tumblr</div></a>

                        <!-- Sharingbutton E-Mail -->
                        <a class="resp-sharing-button__link" href="mailto:?subject=` + title + `&amp;body=` + title + `%20` + url + `%20` + desc + `" target="_self" rel="noopener" aria-label="E-Mail"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solidcircle"><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;</div>E-Mail</div></a>

                        <!-- Sharingbutton LinkedIn -->
                        <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=` + url + `&amp;title=` + title + `&amp;summary=` + desc + `&amp;source=` + url + `" target="_blank" rel="noopener" aria-label="LinkedIn"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solidcircle"><i class="fab fa-linkedin" aria-hidden="true"></i>&nbsp;</div>LinkedIn</div></a>

                        <!-- Sharingbutton WhatsApp -->
                        <a class="resp-sharing-button__link" href="https://api.whatsapp.com://send?text=` + url + `" target="_blank" rel="noopener" aria-label="WhatsApp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solidcircle"><i class="fab fa-whatsapp" aria-hidden="true"></i>&nbsp;</div>WhatsApp</div></a>

                        <!-- Sharingbutton Telegram -->
                        <a class="resp-sharing-button__link" href="https://telegram.me/share/url?text=` + title + `&amp;url=` + url + `" target="_blank" rel="noopener" aria-label="Telegram"><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solidcircle"><i class="fa fa-telegram" aria-hidden="true"></i>&nbsp;</div>Telegram</div></a>
                        
                        <!-- Sharingbutton Pinterest -->
                        <a class="resp-sharing-button__link" href="https://pinterest.com/pin/create/button/?url=` + url + `&amp;media=` + url + `&amp;description=` + title + `." target="_blank" rel="noopener" aria-label="Share on Pinterest"><div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-pinterest" aria-hidden="true"></i>&nbsp;</div>Share on Pinterest</div></a>

                        <!-- Sharingbutton Reddit -->
                        <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=` + url + `&amp;resubmit=true&amp;title=` + title + `." target="_blank" rel="noopener" aria-label="Share on Reddit"><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-pinterest" aria-hidden="true"></i>&nbsp;</div>Share on Reddit</div></a>

                        <!-- Sharingbutton XING -->
                        <a class="resp-sharing-button__link" href="https://www.xing.com/app/user?op=share;url=` + url + `;title=` + title + `." target="_blank" rel="noopener" aria-label="Share on XING"><div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-xing" aria-hidden="true"></i>&nbsp;</div>Share on XING</div></a>

                        <!-- Sharingbutton Hacker News -->
                        <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=` + url + `&amp;t=` + title + `." target="_blank" rel="noopener" aria-label="Share on Hacker News"><div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-hacker-news"></i>&nbsp;</div>Share on Hacker News</div></a>

                        <!-- Sharingbutton VK -->
                        <a class="resp-sharing-button__link" href="http://vk.com/share.php?title=` + title + `.&amp;url=` + url + `" target="_blank" rel="noopener" aria-label="Share on VK"><div class="resp-sharing-button resp-sharing-button--vk resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-vk" aria-hidden="true"></i>&nbsp;</div>Share on VK</div></a>
                    `);

                                $('#social-share-modal').modal('show');
                            });
                        </script>

                        <script type="text/javascript">
                            $(document).on('click', '.check-campaign-with-id', function() {
                                var el = $(this);
                                var id = el.data('id');
                                $.ajax({
                                    type: "POST",
                                    url: 'https://demo.affiliatepro.org/Integration/check_campaign_security_with_id/' + id,
                                    dataType: "json",
                                    success: function(data) {
                                        if (data.statusClass) {
                                            el.parents('td').siblings('.security-status').find('button.badge').remove();

                                            el.parents('td').siblings('.security-status').find('span.badge').removeClass().addClass(data.statusClass).text(data.message);

                                            if (data.security_status == 0)
                                                el.parents('td').siblings('.security-status').prepend(data.integration_code_button);
                                        }
                                    }
                                });
                            })

                            $(document).on('click', '.allow_to_perform_security_check', function() {
                                $(this).hide();
                                $('#perform-security-check-modal .step-1').hide();
                                $('#perform-security-check-modal .step-2').show();
                                $('#perform-security-check-modal .modal-footer').hide();
                                recursive_security_check();
                            });

                            function recursive_security_check(index = 1) {
                                $.ajax({
                                    type: "POST",
                                    url: 'https://demo.affiliatepro.org/Integration/check_campaign_security',
                                    dataType: "json",
                                    data: {
                                        index: index
                                    },
                                    success: function(data) {
                                        if (data.progress_percentage) {
                                            $('#progressbar123').show();
                                            $('#progressbar123 > div').css('width', data.progress_percentage);
                                        } else {
                                            $('#progressbar123').hide();
                                        }

                                        if (data.warning) {
                                            $('#perform-security-check-modal .step-2 h5').hide();
                                            $('#perform-security-check-modal .step-2 h6.text-warning').show();
                                        } else {
                                            let existing_count = $('#perform-security-check-modal .step-2 .' + data.security_status).data('count');
                                            $('#perform-security-check-modal .step-2 .' + data.security_status).data('count', (existing_count + 1));
                                            $('#perform-security-check-modal .step-2 .' + data.security_status).text((existing_count + 1) + ' ' + data.message);
                                            $('#perform-security-check-modal .step-2 .' + data.security_status).show();
                                        }

                                        if (data.index) {
                                            recursive_security_check(data.index);
                                        } else {
                                            $('#perform-security-check-modal .modal-footer').show();
                                            $('#perform-security-check-modal .modal-footer').html('<button type="button" class="btn btn-secondary" onclick="window.location.reload()">' + 'Close' + '</button>');
                                        }
                                    }
                                });
                            }


                            $(document).on('click', ".btn_lang_toggle", function() {
                                let skip_change = false;
                                let id = $(this).data('lang_id');
                                let column = $(this).data('column');
                                let status = $(this).hasClass('fa-toggle-off') ? 1 : 0;
                                $(this).addClass('fa-toggle-off').removeClass('fa-toggle-on');
                                $(this).css("color", "red");


                                if (status) {
                                    $(this).addClass('fa-toggle-on').removeClass('fa-toggle-off');
                                    $(this).css("color", "green");
                                }

                            });


                            $('.select2').select2({
                                placeholder: 'search by groups'
                            });

                            var xhr;

                            function getPage(url) {
                                $this = $(this);
                                if (xhr && xhr.readyState != 4) xhr.abort();

                                xhr = $.ajax({
                                    url: url,
                                    type: 'POST',
                                    dataType: 'html',
                                    data: {
                                        category_id: $(".category_id").val(),
                                        ads_name: $(".ads_name").val(),
                                        vendor_id: $(".vendor_id").val(),
                                        groups: $('.select2').val(),
                                        show_only: $(".show_only").prop("checked"),
                                        status: $("select[name='status']").val(),
                                    },
                                    beforeSend: function() {
                                        $(".btn-search").btn("loading");
                                    },
                                    complete: function() {
                                        $(".btn-search").btn("reset");
                                    },
                                    success: function(json) {
                                        if (json) {
                                            $("#myTable tbody").html(json);
                                            $("#myTable").show();
                                            $(".empty-div").addClass("d-none");
                                        } else {
                                            $(".empty-div").removeClass("d-none");
                                            $("#myTable").hide();
                                        }

                                        $('[data-toggle="tooltip"]').tooltip();
                                    },
                                })

                                xhr = $.ajax({
                                    url: url,
                                    type: 'POST',
                                    dataType: 'html',
                                    data: {
                                        category_id: $(".category_id").val(),
                                        ads_name: $(".ads_name").val(),
                                        vendor_id: $(".vendor_id").val(),
                                        groups: $('.select2').val(),
                                        show_only: $(".show_only").prop("checked"),
                                        status: $("select[name='status']").val(),
                                        paginate: true,
                                    },
                                    beforeSend: function() {
                                        $(".btn-search").btn("loading");
                                    },
                                    complete: function() {
                                        $(".btn-search").btn("reset");
                                    },
                                    success: function(json) {
                                        if (json)
                                            $("#myTable .pagination-td").html(json);
                                    },
                                })


                            }

                            $(".category_id,.vendor_id,.select2,.show_only,select[name='status']").on("change", function() {
                                getPage('https://demo.affiliatepro.org/integration/integration_tools/1');
                            });

                            $(".ads_name").on("keyup", function() {
                                getPage('https://demo.affiliatepro.org/integration/integration_tools/1');
                            });

                            $(".btn-search").on("click", function() {
                                getPage('https://demo.affiliatepro.org/integration/integration_tools/1');
                                return false;
                            })

                            getPage('https://demo.affiliatepro.org/integration/integration_tools/1');

                            $("#myTable .pagination-td").delegate("a", "click", function(e) {
                                e.preventDefault();
                                getPage($(this).attr("href"));
                                return false;
                            })

                            $("#myTable").delegate(".btn-show-integration-mlm-info", 'click', function() {
                                $this = $(this);
                                $.ajax({
                                    url: 'https://demo.affiliatepro.org/integration/getIntegrationMlmInfo',
                                    type: 'POST',
                                    dataType: 'html',
                                    data: {
                                        id: $this.attr("data-id"),
                                    },
                                    beforeSend: function() {
                                        $this.btn("loading");
                                    },
                                    complete: function() {
                                        $this.btn("reset");
                                    },
                                    success: function(html) {
                                        $("#integration-mlm-info").html(html);
                                        $("#integration-mlm-info").modal("show");
                                    },
                                })
                            });

                            $("#myTable").delegate(".btn-show-code", 'click', function() {
                                $this = $(this);
                                $.ajax({
                                    url: 'https://demo.affiliatepro.org/integration/integration_code_modal',
                                    type: 'POST',
                                    dataType: 'html',
                                    data: {
                                        id: $this.attr("data-id"),
                                    },
                                    beforeSend: function() {
                                        $this.btn("loading");
                                    },
                                    complete: function() {
                                        $this.btn("reset");
                                    },
                                    success: function(html) {
                                        $("#showcode-code").html(html);
                                        $("#showcode-code").modal("show");
                                    },
                                })
                            });

                            $("#myTable").delegate(".btn-show-terms", 'click', function() {
                                $this = $(this);
                                $.ajax({
                                    url: 'https://demo.affiliatepro.org/integration/integration_terms_modal',
                                    type: 'POST',
                                    dataType: 'json',
                                    data: {
                                        id: $this.attr("data-id"),
                                    },
                                    beforeSend: function() {
                                        $this.btn("loading");
                                    },
                                    complete: function() {
                                        $this.btn("reset");
                                    },
                                    success: function(json) {
                                        if (json['html']) {
                                            $("#showcode-code").html(json['html']);
                                            $("#showcode-code").modal("show");
                                        }
                                    },
                                })
                            })

                            $("#myTable").delegate(".wallet-toggle .tog", 'click', function() {
                                $(this).parents(".wallet-toggle").find("> div").toggleClass("hide");
                            })
                            $("#myTable").delegate(".tool-remove-link", 'click', function() {
                                if (!confirm("Are you sure ?")) return false;
                                return true;
                            })

                            $("#myTable").delegate(".get-code", 'click', function() {
                                $this = $(this);
                                $.ajax({
                                    url: 'https://demo.affiliatepro.org/integration/tool_get_code',
                                    type: 'POST',
                                    dataType: 'json',
                                    data: {
                                        id: $this.attr("data-id")
                                    },
                                    beforeSend: function() {
                                        $this.btn("loading");
                                    },
                                    complete: function() {
                                        $this.btn("reset");
                                    },
                                    success: function(json) {
                                        if (json['html']) {
                                            $("#integration-code .modal-content").html(json['html']);
                                            $("#integration-code").modal("show");
                                        }
                                    },
                                })
                            })

                            $(document).ready(function() {
                                $('[data-toggle="tooltip"]').tooltip();
                            });
                        </script>
                        <script type="text/javascript">
                            function resetNotify() {
                                $.ajax({
                                    url: 'resetnotify',
                                    type: 'POST',
                                    dataType: 'json',
                                    beforeSend: function() {},
                                    success: function(response) {
                                        if (response.status == 1)
                                            $(".ajax-notifications_count").text(0);
                                    },
                                })
                            }
                        </script>


                    </div>

                    <div class="modal modal-style" id="setting-widzard"></div>
                    <div class="modal modal-style" id="log-widzard"></div>

                    <div class="modal" id="model-ajaxError">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-body">
                                    <img src="{% static 'dashboard/assets/images/ajax-warning.png' %}">
                                    <div class="-body"></div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Dismiss</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <script type="text/javascript" src="{% static 'dashboard/assets/plugins/toastr/toastr.js' %}"></script>
                    <script type="text/javascript">
                        var serverErrorCode = {
                            100: 'Continue',
                            101: 'Switching Protocols',
                            102: 'Processing',
                            200: 'OK',
                            201: 'Created',
                            202: 'Accepted',
                            203: 'Non-Authoritative Information',
                            204: 'No Content',
                            205: 'Reset Content',
                            206: 'Partial Content',
                            207: 'Multi-Status',
                            208: 'Already Reported',
                            226: 'IM Used',
                            300: 'Multiple Choices',
                            301: 'Moved Permanently',
                            302: 'Found',
                            303: 'See Other',
                            304: 'Not Modified',
                            305: 'Use Proxy',
                            306: 'Switch Proxy',
                            307: 'Temporary Redirect',
                            308: 'Permanent Redirect',
                            400: 'Bad Request',
                            401: 'Unauthorized',
                            402: 'Payment Required',
                            403: 'Forbidden',
                            404: 'Not Found',
                            405: 'Method Not Allowed',
                            406: 'Not Acceptable',
                            407: 'Proxy Authentication Required',
                            408: 'Request Timeout',
                            409: 'Conflict',
                            410: 'Gone',
                            411: 'Length Required',
                            412: 'Precondition Failed',
                            413: 'Request Entity Too Large',
                            414: 'Request-URI Too Long',
                            415: 'Unsupported Media Type',
                            416: 'Requested Range Not Satisfiable',
                            417: 'Expectation Failed',
                            418: 'I am a teapot',
                            419: 'Authentication Timeout',
                            420: 'Enhance Your Calm',
                            420: 'Method Failure',
                            422: 'Unprocessable Entity',
                            423: 'Locked',
                            424: 'Failed Dependency',
                            424: 'Method Failure',
                            425: 'Unordered Collection',
                            426: 'Upgrade Required',
                            428: 'Precondition Required',
                            429: 'Too Many Requests',
                            431: 'Request Header Fields Too Large',
                            444: 'No Response',
                            449: 'Retry With',
                            450: 'Blocked by Windows Parental Controls',
                            451: 'Redirect',
                            451: 'Unavailable For Legal Reasons',
                            494: 'Request Header Too Large',
                            495: 'Cert Error',
                            496: 'No Cert',
                            497: 'HTTP to HTTPS',
                            499: 'Client Closed Request',
                            500: 'Internal Server Error',
                            501: 'Not Implemented',
                            502: 'Bad Gateway',
                            503: 'Service Unavailable',
                            504: 'Gateway Timeout',
                            505: 'HTTP Version Not Supported',
                            506: 'Variant Also Negotiates',
                            507: 'Insufficient Storage',
                            508: 'Loop Detected',
                            509: 'Bandwidth Limit Exceeded',
                            510: 'Not Extended',
                            511: 'Network Authentication Required',
                            598: 'Network read timeout error',
                            599: 'Network connect timeout error',
                        }

                        toastr.options = {
                            "closeButton": true,
                            "debug": false,
                            "newestOnTop": true,
                            "progressBar": true,
                            "positionClass": "toast-top-right",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "300",
                            "hideDuration": "20000",
                            "timeOut": "20000",
                            "extendedTimeOut": "20000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        }

                        function show_tost(type, title, message) {
                            toastr[type](message, title)
                        }

                        $(".btn-setting").on('click', function() {
                            $this = $(this);
                            $("#setting-widzard").modal({
                                backdrop: 'static',
                                keyboard: false
                            });

                            $("#setting-widzard").html('Loading');

                            $.ajax({
                                url: 'https://demo.affiliatepro.org/setting/getModal',
                                type: 'POST',
                                dataType: 'json',
                                data: {
                                    'key': $this.attr('data-key'),
                                    'type': $this.attr('data-type'),
                                },
                                // beforeSend:function(){ $this.btn("loading"); },
                                // complete:function(){ $this.btn("reset"); },
                                success: function(json) {
                                    if (json['html']) {
                                        $("#setting-widzard").html(json['html']);
                                    }
                                },
                            })
                        })


                        $(document).delegate('.allow-number', 'keypress keyup blur', function(event) {
                            $(this).val($(this).val().replace(/[^0-9\.]/g, ''));
                            if ((event.which != 46 || $(this).val().indexOf('.') != -1) && (event.which < 48 || event.which > 57)) {
                                event.preventDefault();
                            }
                        });

                        $(document).delegate("[data-log]", 'click', function() {
                            $this = $(this);

                            var data = {};
                            var search = $this.attr('data-extra');
                            if (search) {
                                data = JSON.parse('{"' + decodeURI(search).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}')
                            }

                            data['type'] = $this.attr("data-log");
                            $.ajax({
                                url: 'logs',
                                type: 'POST',
                                dataType: 'json',
                                data: data,
                                beforeSend: function() {
                                    $this.btn("loading");
                                },
                                complete: function() {
                                    $this.btn("reset");
                                },
                                success: function(json) {
                                    if (json['html']) {
                                        $("#log-widzard").modal({
                                            backdrop: 'static',
                                            keyboard: false
                                        });
                                        $("#log-widzard").html(json['html']);
                                    }
                                },
                            })
                        })

                        $(".password-group .input-group-prepend button").on('click', function() {
                            $input = $(this).parents(".password-group").find("input");
                            $i = $(this).parents(".password-group").find("i");
                            if ($i.hasClass("fa-eye")) {
                                $i.addClass("fa-eye-slash");
                                $i.removeClass("fa-eye");
                                $input.attr('type', 'text');
                            } else {
                                $i.addClass("fa-eye");
                                $i.removeClass("fa-eye-slash");
                                $input.attr('type', 'password');
                            }
                        })

                        $(document).ajaxComplete(function myErrorHandler(event, xhr, ajaxOptions, thrownError) {
                            var statusCode = xhr.status;


                            if (statusCode != 200 && ajaxOptions.type == 'POST') {
                                var title = '';
                                var body = '';

                                title = 'Internal Server Error';
                                body += '<h3>Sorry, an error has occured.</h3>';

                                if (serverErrorCode[statusCode]) {
                                    body += "<p>Error Message : " + serverErrorCode[statusCode] + "</p>";
                                    body += "<p>Error Code : " + statusCode + "</p>";

                                    $("#model-ajaxError .modal-title").html(title);
                                    $("#model-ajaxError .modal-body .-body").html(body);
                                    $("#model-ajaxError").modal("show");
                                } else {
                                    body += '<p>Error Message : Uknown Error </p>';
                                }

                                $(".btn-loading").removeClass('btn-loading');
                            }
                        });
                    </script>
                </div>
                <div class="dashboard-footer">
                    <div class="d-flex align-items-center justify-content-between flex-wrap">
                        <div class="footer-rights">
                            <img src="{% static 'dashboard/assets/template/images/footer-logo.png' %}" alt="Logo:">
                            <p>Affiliate Script Footer</p>
                        </div>
                        <a href="script_details">
                            <div class="text-right script-right">
                                <img src="{% static 'dashboard/assets/template/images/script-icon.png' %}" alt="">
                                <span>SCRIPT VERSION</span>
                                <span>6.0.0.1</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="modal" id="payment-detail_modal">

                <div class="modal-dialog modal-lg">

                    <div class="modal-content">

                        <div class="modal-header">

                            <h4 class="modal-title mt-0">User Payment Details</h4>

                            <button type="button" class="close" data-dismiss="modal">&times;</button>

                        </div>

                        <div class="modal-body">

                            <h4 class="modal-title mt-0">Bank Details</h4>

                            <div class="table-rep-plugin">

                                <div class="table-responsive b-0" data-pattern="priority-columns">

                                    <table id="tech-companies-1" class="table  table-striped">

                                        <thead>

                                            <tr>

                                                <th class="txt-cntr">Bank Name</th>

                                                <th class="txt-cntr">Account Number</th>

                                                <th class="txt-cntr">Account Name</th>

                                                <th class="txt-cntr">IFSC Code</th>

                                            </tr>

                                        </thead>

                                        <tbody class="bank-details"> </tbody>

                                    </table>

                                </div>

                            </div>

                            <h4 class="modal-title mt-0">Paypal Emails</h4>

                            <div class="table-rep-plugin">

                                <div class="table-responsive b-0" data-pattern="priority-columns">

                                    <table id="tech-companies-1" class="table  table-striped">

                                        <thead>

                                            <tr>
                                                <th class="txt-cntr"></th>

                                                <th class="txt-cntr">Email</th>

                                            </tr>

                                        </thead>

                                        <tbody class="paypal-details"> </tbody>

                                    </table>

                                </div>

                            </div>


                            <h4 class="modal-title mt-0">User Details</h4>

                            <div class="table-rep-plugin">

                                <div class="table-responsive b-0" data-pattern="priority-columns">

                                    <table id="tech-companies-1" class="table  table-striped">

                                        <tbody class="user-details"></tbody>

                                    </table>

                                </div>

                            </div>

                            <div class="modal-footer">

                                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

            <script type="text/javascript">
                $(document).delegate(".only-number-allow", "keypress", function(e) {
                    if (e.which != 46 && e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57))
                        return false;
                });

                $(document).on('ready', function() {
                    if (getCookie('hide_welcome') != 'true')
                        $("#welcome-modal").modal("show");
                })

                function setCookie(cname, cvalue, exdays) {
                    var d = new Date();
                    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));

                    var expires = "expires=" + d.toUTCString();
                    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                }

                function readURLAndSetValue(input, name, placeholder) {

                    if (input.files && input.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function(e) {
                            $("input[name='" + name + "']").val('image.jpg');
                            $(placeholder).attr('src', e.target.result);
                        }

                        reader.readAsDataURL(input.files[0]);
                    }
                }

                function readURL(input, placeholder) {

                    if (input.files && input.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function(e) {
                            $(placeholder).attr('src', e.target.result);
                        }

                        reader.readAsDataURL(input.files[0]);
                    }
                }

                function getCookie(cname) {

                    var name = cname + "=";
                    var ca = document.cookie.split(';');

                    for (var i = 0; i < ca.length; i++) {
                        var c = ca[i];

                        while (c.charAt(0) == ' ') {
                            c = c.substring(1);
                        }

                        if (c.indexOf(name) == 0)
                            return c.substring(name.length, c.length);
                    }

                    return "";
                }

                $('.hide-welcome').on('click', function() {

                    setCookie("hide_welcome", "true", 365)

                    $("#welcome-modal").modal("hide");

                })
            </script>


            <div class="modal" id="model-shorturl"></div>

            <script type="text/javascript">
                $(".btn-delete").on('click', function() {
                    return confirm('Are you sure ?');
                })

                $(document).delegate("[payment_detail]", 'click', function(e) {

                    e.preventDefault();

                    e.stopPropagation();

                    $this = $(this);

                    var user_id = $this.attr("payment_detail");

                    $.ajax({

                        url: 'getpaymentdetail/' + user_id,

                        type: 'POST',

                        dataType: 'json',

                        beforeSend: function() {
                            $this.btn("loading");
                        },

                        complete: function() {
                            $this.btn("reset");
                        },

                        success: function(json) {

                            $('#payment-detail_modal').modal("show");

                            var html = '';

                            $.each(json['paymentlist'], function(i, j) {

                                html += '<tr>';

                                html += '<th>' + j['payment_bank_name'] + '</th>';

                                html += '<th>' + j['payment_account_number'] + '</th>';

                                html += '<th>' + j['payment_account_name'] + '</th>';

                                html += '<th>' + j['payment_ifsc_code'] + '</th>';

                                html += '</tr>';

                            })

                            $('#payment-detail_modal .bank-details').html(html);

                            var html = '';

                            $.each(json['paypalaccounts'], function(i, j) {

                                html += '<tr>';

                                html += '<th>' + (i + 1) + '</th>';

                                html += '<th>' + j['paypal_email'] + '</th>';

                                html += '</tr>';

                            })

                            $('#payment-detail_modal .paypal-details').html(html);

                            var html = '';

                            html += '<tr>';

                            html += '<th>First Name</th>';

                            html += '<td>' + json.user.firstname + '</td>';

                            html += '</tr>';

                            html += '<tr>';

                            html += '<th>Last Name</th>';

                            html += '<td>' + json.user.lastname + '</td>';

                            html += '</tr>';

                            html += '<tr>';

                            html += '<th>Username</th>';

                            html += '<td>' + json.user.username + '</td>';

                            html += '</tr>';

                            html += '<tr>';

                            html += '<th>Email</th>';

                            html += '<td>' + json.user.email + '</td>';

                            html += '</tr>';

                            html += '<tr>';

                            html += '<th>Phone</th>';

                            html += '<td>' + json.user.phone + '</td>';

                            html += '</tr>';

                            html += '<tr>';

                            html += '<th>Address</th>';

                            html += '<td>' + json.user.address + '</td>';

                            html += '</tr>';

                            html += '<tr>';

                            html += '<th>State</th>';

                            html += '<td>' + json.user.state + '</td>';

                            html += '</tr>';

                            html += '<tr>';

                            html += '<th>Country</th>';

                            html += '<td>' + json.user.country + '</td>';

                            html += '</tr>';

                            $('#payment-detail_modal .user-details').html(html);
                        },
                    })
                })
            </script>

            <script src="{% static 'dashboard/assets/js/jquery-ui.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/jquery-confirm.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/popper.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/bootstrap.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/modernizr.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/detect.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/fastclick.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/jquery.slimscroll.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/jquery.blockUI.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/waves.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/jquery.nicescroll.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/jquery.scrollTo.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/vertical/assets/plugins/skycons/skycons.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/vertical/assets/plugins/raphael/raphael-min.js' %}"></script>

            <script src="{% static 'dashboard/assets/vertical/assets/plugins/morris/morris.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/vertical/assets/plugins/magnific-popup/jquery.magnific-popup.min.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/lightbox.js' %}"></script>

            <script src="{% static 'dashboard/assets/js/jssocials-1.4.0/jssocials.min.js' %}"></script>

            <link href="https://demo.affiliatepro.org/assets/js/jssocials-1.4.0/jssocials.css' %}" type="text/css" rel="stylesheet" />

            <link href="https://demo.affiliatepro.org/assets/js/jssocials-1.4.0/jssocials-theme-flat.css' %}" type="text/css" rel="stylesheet" />

            <script type="text/javascript">
                let leftHeight = $(".left-menu").height();
                let navbarHeight = $(".dashboard-navbar").height();
                let errorHeight = $(".server-errors").height();
                let footerHeight = $(".dashboard-footer").height();
                let elTotalheight = navbarHeight + errorHeight + footerHeight;
                let contentHeight = leftHeight - elTotalheight - 26;
                $(".content-wrapper").css('min-height', contentHeight);

                $(document).delegate(".copy-input input", 'click', function() {
                    $(this).select();
                })

                $(document).delegate('[copyToClipboard]', "click", function() {
                    $this = $(this);

                    var $temp = $("<input>");

                    $("body").append($temp);

                    $temp.val($(this).attr('copyToClipboard')).select();

                    document.execCommand("copy");

                    $temp.remove();

                    $this.tooltip('hide').attr('data-original-title', 'Copied!').tooltip('show');

                    setTimeout(function() {
                        $this.tooltip('hide');
                    }, 500);
                });

                $('[copyToClipboard]').tooltip({
                    trigger: 'click',
                    placement: 'bottom'

                });

                (function($) {
                    $.fn.button = function(action) {
                        var self = $(this);
                        if (action == 'loading') {
                            if ($(self).attr("disabled") == "disabled") {
                                //e.preventDefault();
                            }

                            $(self).attr("disabled", "disabled");

                            $(self).attr('data-btn-text', $(self).html());

                            $(self).html('<i class="fa fa-spinner fa-spin"></i>' + $(self).text());
                        }

                        if (action == 'reset') {
                            $(self).html($(self).attr('data-btn-text'));
                            $(self).removeAttr("disabled");
                        }
                    }

                })(jQuery);
            </script>

            <script src="{% static 'dashboard/assets/js/app.js' %}"></script>

            <link href="https://demo.affiliatepro.org/assets/js/summernote-0.8.12-dist/summernote-bs4.css' %}" rel="stylesheet">

            <script src="{% static 'dashboard/assets/js/summernote-0.8.12-dist/summernote-bs4.js' %}"></script>

            <div class="modal fade" id="ip-flag_model">

                <div class="modal-dialog">

                    <div class="modal-content">

                        <div class="modal-header">

                            <h4 class="modal-title">All IPs Details</h4>

                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

                        </div>

                        <div class="modal-body"></div>

                        <div class="modal-footer">

                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                        </div>

                    </div>

                </div>

            </div>

            <script>
                $(".select2-input").select2();

                $(document).delegate(".view-all", 'click', function() {
                    var data = $(this).find("span").html();
                    var html = '<table class="table table-hover">';

                    data = JSON.parse(data);

                    html += '<tr>';

                    html += ' <th>' + 'admin.ip' + '</th>';

                    html += ' <th width="30px">' + 'admin.country' + '</th>';

                    html += '</tr>';

                    $.each(data, function(i, j) {
                        html += '<tr>';

                        html += ' <td>' + j['ip'] + '</td>';

                        html += ' <td><img style="width: 20px;" src="{% static 'dashboard/assets/vertical/assets/images/flags/' + j['country_code'].toLowerCase() + '.png' %}" ></td>';

                        html += '</tr>';
                    })

                    html += '</table>';

                    $("#ip-flag_model").modal("show");

                    $("#ip-flag_model .modal-body").html(html);
                })

                $('[data-toggle="tooltip"]').tooltip();

                if ($('#morris-area-chart').length > 0) {
                    var areaData = [

                        {
                            y: '2011',
                            a: 10,
                            b: 15
                        },

                        {
                            y: '2012',
                            a: 30,
                            b: 35
                        },

                        {
                            y: '2013',
                            a: 10,
                            b: 25
                        },

                        {
                            y: '2014',
                            a: 55,
                            b: 45
                        },

                        {
                            y: '2015',
                            a: 30,
                            b: 20
                        },

                        {
                            y: '2016',
                            a: 40,
                            b: 35
                        },

                        {
                            y: '2017',
                            a: 10,
                            b: 25
                        },

                        {
                            y: '2018',
                            a: 25,
                            b: 30
                        }

                    ];

                    Morris.Area({

                        element: 'morris-area-chart',

                        pointSize: 3,

                        lineWidth: 2,

                        data: areaData,

                        xkey: 'y',

                        ykeys: ['a', 'b'],

                        labels: ['Orders', 'Sales'],

                        resize: true,

                        hideHover: 'auto',

                        gridLineColor: '#eef0f2',

                        lineColors: ['#00c292', '#03a9f3'],

                        lineWidth: 0,

                        fillOpacity: 0.1,

                        xLabelMargin: 10,

                        yLabelMargin: 10,

                        grid: false,

                        axes: false,

                        pointSize: 0

                    });
                }

                $(document).on('ready', function() {

                    if ($('#morris-donut-chart').length > 0) {
                        var donutData = [];

                        Morris.Donut({

                            element: 'morris-donut-chart',

                            data: donutData,

                            resize: true,

                            colors: ['#40a4f1', '#5b6be8', '#c1c5e2', '#e785da', '#00bcd2']

                        });

                    }

                    if ($("#boxscroll").length > 0)
                        $("#boxscroll").niceScroll({
                            cursorborder: "",
                            cursorcolor: "#cecece",
                            boxzoom: true
                        });

                    if ($("#boxscroll2").length > 0)
                        $("#boxscroll2").niceScroll({
                            cursorborder: "",
                            cursorcolor: "#cecece",
                            boxzoom: true
                        });


                    if ($(".clickable-row").length > 0) {
                        $(".clickable-row").on('click', function() {
                            window.location = $(this).data("href");
                        });
                    }

                    if ($("#Country").length > 0) {
                        $('#Country').on('change', function() {
                            country_id = $(this).val();

                            $.ajax({

                                type: "POST",

                                url: "getstate",

                                data: 'country_id=' + country_id,

                                success: function(data) {

                                    $("#StateProvince").html(data);

                                }

                            });

                        });
                    }

                });


                function shownofication(id, url) {

                    $.ajax({

                        type: "POST",

                        url: "updatenotify",

                        data: 'id=' + id,

                        dataType: 'json',

                        success: function(data) {

                            window.location.href = data['location'];

                        }

                    });

                }

                $(document).on('ready', function() {
                    $('.summernote-img').each(function() {
                        sumNote($(this));
                    });

                });

                function sumNote(element) {
                    var height = $(element).attr("data-height") ? $(element).attr("data-height") : 500;

                    $(element).summernote({

                        disableDragAndDrop: true,

                        height: height,


                        toolbar: [

                            ['style', ['style']],

                            ['font', ['bold', 'underline', 'clear']],

                            ['fontname', ['fontname']],

                            ['color', ['color']],

                            ['para', ['ul', 'ol', 'paragraph']],

                            ['table', ['table']],

                            ['insert', ['link', 'image', 'picture', 'video']],

                            ['view', ['fullscreen', 'codeview', 'help']]

                        ],

                        buttons: {

                            image: function() {

                                var ui = $.summernote.ui;

                                // create button

                                var button = ui.button({

                                    contents: '<i class="fa fa-image" />',

                                    tooltip: false,

                                    click: function() {

                                        $('#modal-image').remove();



                                        $.ajax({

                                            url: 'https://demo.affiliatepro.org/filemanager',

                                            dataType: 'html',

                                            beforeSend: function() {

                                            },
                                            complete: function() {

                                            },
                                            success: function(html) {

                                                $('body').append('<div id="modal-image" class="modal fade">' + html + '</div>');

                                                $('#modal-image').modal('show');

                                                $('#modal-image').delegate('.image-box .thumbnail', 'click', function(e) {

                                                    e.preventDefault();

                                                    $(element).summernote('insertImage', $(this).attr('href'));

                                                    $('#modal-image').modal('hide');

                                                });

                                            }

                                        });

                                    }

                                });



                                return button.render();

                            }

                        }

                    });

                }
            </script>

</div>
  {% endblock %}